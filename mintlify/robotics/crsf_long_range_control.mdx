---
title: Long Range RF Robot Control
description: "CRSF Protocol Support"
---

## Introduction

Current safety-focused manual override of robot motion typically uses Bluetooth game controllers, but these are not particularly reliable. The biggest problem is that most game controllers go to sleep after several minutes of inactivity, resulting in control gaps. A more robust solution are professional drone control radios, such as the [TBS Tango2 II transmitter/receiver combination](https://www.team-blacksheep.com/products/prod:tbs_tango_2).

## Pairing 

Set up the radio/receiver per the Tango II instructions. This is can be unexpectedly difficult, based on firmware revisions and outdated/misleading documentation. Expect to spend several hours trying to find current instructions, updating the transmitter/receiver firmware, and finally getting them to pair correctly. *UPDATE* The best solution is the [TBS Agent M browser based configurator](https://www.team-blacksheep.com/agentm/).

## Configuration

The radios can have the throttle control on the left or right side. The default throttle on the TBS Tango 2 is on the **left** stick in the default Mode 2 setting. You can change the mode setting in Betaflight. 

Suggested settings for the radio are:

* Internal RF
** CRSF
** Ch. range CH1-16
** Receiver 00
* External RF
** Mode OFF

We suggest using a Baud setting of `420000`. 

## Cabling

Connect the receiver to a TTL->USB adapter, such as the Waveshare USB->TTL. *WARNING* - the generic / fake CP CP2102 modules from Amazon do not work, but give CRC errors for unknown reasons. 

## Usage

Find the serial port via:

```bash
ls /dev/tty.*   
```

It should be something like `/dev/tty.usbserial-0001` or `/dev/tty.usbserial-B003ABY3`. Then, start the driver with:

```
uv run parse_crsf_radio.py --port /dev/tty.usbserial-B003ABY3
```

## Code Origin 

The code is based on Bryan Mayland's CRSF ["Python Parser"](https://github.com/crsf-wg/crsf/wiki/Python-Parser). The code also uses the [public CRSF documentation](https://github.com/tbs-fpv/tbs-crsf-spec).

## Known Issues

Occasionally, one of the RC_Channels has a value of >2000, which is noise. This is a problem, since it signals the receiver that a switch was activated, even if it was not. We reject all data >2000. 

We also clip all stick control values to the 174 to 1806 range. Then then map the `174<>1806` range to `0.0<>1.0`. A typical range for a valid RC signal is 174 to 1806 - this is true for both sticks and switches.
